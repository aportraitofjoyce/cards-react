(this["webpackJsonpcards-react"]=this["webpackJsonpcards-react"]||[]).push([[0],{14:function(e,t,n){e.exports={wrapper:"Header_wrapper__2vAGZ",container:"Header_container__236E4",active:"Header_active__PRANC"}},23:function(e,t,n){e.exports={container:"Input_container__3GYcG",errorInput:"Input_errorInput__3GgPO",error:"Input_error__2xVl4"}},24:function(e,t,n){e.exports={wrapper:"NewPassword_wrapper__17zrJ",container:"NewPassword_container__GjiqG"}},25:function(e,t,n){e.exports={checkEmail:"CheckEmail_checkEmail__1T71d",container:"CheckEmail_container__3RPFL",icon:"CheckEmail_icon__2LX8H"}},30:function(e,t,n){e.exports={default:"Button_default__2galI",secondary:"Button_secondary__3XSP1",grouped:"Button_grouped__3cKo2"}},31:function(e,t,n){e.exports={progressContainer:"Progress_progressContainer__2xQcm",progressBar:"Progress_progressBar__15UTX",loading:"Progress_loading__22sHP"}},42:function(e,t,n){e.exports={checkbox:"Checkbox_checkbox__3lVeK"}},48:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),s=n(21),o=n.n(s),i=(n(48),n(4)),l=n(5),u=n(8),d=n.n(u),j=n(15),b=n(2),h=n(40),p=n.n(h).a.create({baseURL:"https://neko-back.herokuapp.com/2.0",withCredentials:!0}),O=function(e){return p.post("/auth/register",e)},m=function(){return p.delete("/auth/me")},f=function(){return p.post("/auth/me",{})},v=function(e){return p.post("/auth/forgot",e)},x=function(e){return p.post("/auth/set-new-password",e)};!function(e){e.SET_APP_STATUS="APP/SET_APP_STATUS",e.SET_APP_ERROR="APP/SET_APP_ERROR",e.SET_APP_INITIALIZED="APP/SET_INITIALIZED"}(a||(a={}));var g,E={status:"idle",error:null,isInitialized:!1},_=function(e){return{type:a.SET_APP_STATUS,payload:{status:e}}},S=function(e){return{type:a.SET_APP_ERROR,payload:{error:e}}};!function(e){e.SET_REGISTRATION_SUCCESS="AUTH/SET_REGISTRATION_SUCCESS",e.SET_USERS_INFO="AUTH/SET_USERS_INFO",e.SET_IS_LOGGED_IN="AUTH/SET_IS_LOGGED_IN",e.SET_EMAIL_RECOVERY="AUTH/SET_EMAIL_RECOVERY"}(g||(g={}));var y,R={registrationSuccess:!1,isLoggedIn:!1,recoveryEmail:null,userInfo:null},w=function(e){return{type:g.SET_REGISTRATION_SUCCESS,payload:{status:e}}},C=function(e){return{type:g.SET_USERS_INFO,payload:e}},P=function(e){return{type:g.SET_IS_LOGGED_IN,payload:{status:e}}},I=function(e){return{type:g.SET_EMAIL_RECOVERY,payload:{email:e}}},T=function(){return function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(_("loading")),e.next=4,f();case 4:n=e.sent,t(C(n.data)),t(P(!0)),t(_("succeeded")),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),r=e.t0.response?e.t0.response.data.error:e.t0.message+", more details in the console",t(_("failed")),t(S(r));case 15:return e.prev=15,t((c=!0,{type:a.SET_APP_INITIALIZED,payload:{status:c}})),e.finish(15);case 18:case"end":return e.stop()}var c}),e,null,[[0,10,15,18]])})));return function(t){return e.apply(this,arguments)}}()},N=n(7),A=l.c,k=function(e,t){var n=Object(r.useState)(e),a=Object(N.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)(!1),i=Object(N.a)(o,2),l=i[0],u=i[1];return{value:c,touched:l,onChange:function(e){return s(e.currentTarget.value)},onBlur:function(){return u(!0)},validation:L(c,t)}},L=function(e,t){var n=Object(r.useState)(!1),a=Object(N.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)(""),i=Object(N.a)(o,2),l=i[0],u=i[1],d=Object(r.useState)(""),j=Object(N.a)(d,2),b=j[0],h=j[1],p=Object(r.useState)(""),O=Object(N.a)(p,2),m=O[0],f=O[1],v=Object(r.useState)(""),x=Object(N.a)(v,2),g=x[0],E=x[1];return Object(r.useEffect)((function(){for(var n in t)switch(n){case"isRequired":u(e?"":"Field is required");break;case"minLength":e.length<t[n]?f("Min length must be more than ".concat(t[n])):f("");break;case"maxLength":e.length>t[n]?E("Max length must be less than ".concat(t[n])):E("");break;case"isEmail":/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())?h(""):h("Wrong email address")}}),[e]),Object(r.useEffect)((function(){s(!(l||b||m||g))}),[t]),{isValid:c,isRequired:l,isEmail:b,minLength:m,maxLength:g}},G=n(0),D=n(17),F=n(23),U=n.n(F),H=function(e){var t=e.type,n=e.onChange,a=e.onChangeText,r=e.onKeyPress,c=e.onEnter,s=e.error,o=e.className,i=e.spanClassName,l=Object(D.a)(e,["type","onChange","onChangeText","onKeyPress","onEnter","error","className","spanClassName"]),u="".concat(s?U.a.errorInput:"").concat(o||""),d="".concat(U.a.error).concat(i||"");return Object(G.jsxs)("div",{className:U.a.container,children:[Object(G.jsx)("input",Object(b.a)({type:t||"text",onChange:function(e){n&&n(e),a&&a(e.currentTarget.value)},onKeyPress:function(e){r&&r(e),c&&"Enter"===e.key&&c()},className:u,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442..."},l)),s&&Object(G.jsx)("span",{className:d,children:s})]})},M=n(30),W=n.n(M),V=function(e){var t=e.secondary,n=e.className,a=e.grouped,r=Object(D.a)(e,["secondary","className","grouped"]),c="".concat(t?W.a.secondary:"").concat(a?W.a.grouped:"").concat(n||"");return Object(G.jsx)("button",Object(b.a)({className:c},r))},Y=n(42),Z=n.n(Y),B=function(e){e.type;var t=e.onChange,n=e.onChangeChecked,a=e.className,r=(e.spanClassName,e.children),c=Object(D.a)(e,["type","onChange","onChangeChecked","className","spanClassName","children"]),s="".concat(Z.a.checkbox).concat(a||"");return Object(G.jsxs)("label",{children:[Object(G.jsx)("input",Object(b.a)({type:"checkbox",onChange:function(e){t&&t(e),n&&n(e.currentTarget.checked)},className:s},c)),r&&Object(G.jsx)("span",{children:r})]})},K=n(6),q=function(e,t,n){return p.post("/auth/login",{email:e,password:t,rememberMe:n})},z="SET_USER_DATA",$={name:"",avatar:"",publicCardPacksCount:0},J=function(e,t,n){return function(a){q(e,t,n).then((function(e){var t=e.data,n=t.email,r=t.avatar,c=t.publicCardPacksCount;a(function(e,t,n){return{type:z,payload:{name:e,avatar:t,publicCardPacksCount:n}}}(n,r,c))})).catch((function(e){e.response?e.response.data.error:e.message;console.log("Error:",Object(b.a)({},e))})).finally()}},X=n(24),Q=n.n(X),ee=n(25),te=n.n(ee);!function(e){e.HOME="/",e.EMPTY="",e.ERROR="/404",e.PROFILE="/profile",e.LOGIN="/login",e.REGISTRATION="/registration",e.PASSWORD_RECOVERY="/password-recovery",e.NEW_PASSWORD="/new-password",e.CHECK_EMAIL="/check-email"}(y||(y={}));var ne=[{path:y.HOME,component:function(){return Object(G.jsx)("div",{children:Object(G.jsx)("h1",{children:"Home Page"})})},exact:!0},{path:y.PROFILE,component:function(){var e=A((function(e){return e.auth})).isLoggedIn,t=Object(l.c)((function(e){return e.login.name})),n=Object(l.c)((function(e){return e.login.avatar})),a=Object(l.c)((function(e){return e.login.publicCardPacksCount})),c=Object(l.b)();return Object(r.useEffect)((function(){c(T())}),[c]),Object(G.jsxs)("div",{children:[!e&&Object(G.jsx)(i.a,{to:y.LOGIN}),Object(G.jsxs)("form",{children:[Object(G.jsx)("h1",{children:"Profile"}),Object(G.jsx)("div",{children:t}),Object(G.jsx)("div",{children:n}),Object(G.jsx)("div",{children:a})]})]})}},{path:y.REGISTRATION,component:function(){var e=A((function(e){return e.auth})).registrationSuccess,t=Object(l.b)(),n=k("",{isRequired:!0,isEmail:!0}),a=k("",{minLength:7,maxLength:25}),r=k("",{minLength:7,maxLength:25});return Object(G.jsxs)("div",{children:[e&&Object(G.jsx)(i.a,{to:y.LOGIN}),Object(G.jsx)("h1",{children:"Registration"}),Object(G.jsxs)("form",{onSubmit:function(e){var r;e.preventDefault(),t((r={email:n.value,password:a.value},function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(_("loading")),e.next=4,O(r);case 4:t(w(!0)),t(_("succeeded")),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(0),n=e.t0.response?e.t0.response.data.error:e.t0.message+", more details in the console",t(_("failed")),t(S(n)),alert(n);case 14:return e.prev=14,t(w(!1)),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,8,14,17]])})));return function(t){return e.apply(this,arguments)}}()))},style:{display:"flex",flexDirection:"column",gap:24},children:[Object(G.jsx)("label",{htmlFor:"registerEmail",children:"Email"}),Object(G.jsx)(H,Object(b.a)({id:"registerEmail",type:"email",placeholder:"Enter you email address..."},n)),n.touched&&n.validation&&Object(G.jsx)("span",{style:{color:"red"},children:n.validation.isRequired||n.validation.isEmail}),Object(G.jsx)("label",{htmlFor:"registerPassword",children:"Password"}),Object(G.jsx)(H,Object(b.a)({id:"registerPassword",type:"text",placeholder:"Enter your password..."},a)),a.touched&&a.validation&&Object(G.jsx)("span",{style:{color:"red"},children:a.validation.minLength||a.validation.maxLength}),Object(G.jsx)("label",{htmlFor:"registerConfirmPassword",children:"Confirm Password"}),Object(G.jsx)(H,Object(b.a)({id:"registerConfirmPassword",type:"text",placeholder:"Confirm your password..."},r)),r.touched&&r.validation&&Object(G.jsx)("span",{style:{color:"red"},children:r.validation.minLength||r.validation.maxLength}),Object(G.jsx)(V,{type:"submit",disabled:!n.validation.isValid||!a.validation.isValid||!r.validation.isValid,children:"Register"})]})]})}},{path:y.LOGIN,component:function(){var e=A((function(e){return e.login})),t=Object(r.useState)(""),n=Object(N.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(""),o=Object(N.a)(s,2),u=o[0],d=o[1],j=Object(r.useState)(!1),b=Object(N.a)(j,2),h=b[0],p=b[1],O=Object(l.b)(),m=Object(i.g)();return Object(G.jsxs)("div",{children:[Object(G.jsx)("h1",{children:"Sign In"}),Object(G.jsxs)("form",{onSubmit:function(){O(J(a,u,h)),c(""),d(""),m.push(y.PROFILE),console.log(e)},children:[Object(G.jsx)("h1",{children:e.name}),Object(G.jsx)("label",{htmlFor:"loginEmail",children:"Email"}),Object(G.jsx)(H,{id:"loginEmail",type:"email",placeholder:"Enter your email address",value:a,onChange:function(e){return c(e.currentTarget.value)}}),Object(G.jsx)("label",{htmlFor:"loginPassword",children:"Password"}),Object(G.jsx)(H,{id:"loginPassword",type:"password",placeholder:"Enter your password",value:u,onChange:function(e){return d(e.currentTarget.value)}}),Object(G.jsx)(K.b,{to:y.PASSWORD_RECOVERY,children:Object(G.jsx)("h4",{children:"Forgot Password"})}),Object(G.jsx)(B,{checked:h,onChange:function(e){return p(e.currentTarget.checked)},children:"Remember me"}),Object(G.jsx)(V,{type:"submit",children:"Login"}),Object(G.jsxs)("div",{children:[Object(G.jsx)("p",{children:"Don\u2019t have an account?"}),Object(G.jsx)(K.b,{to:y.REGISTRATION,children:Object(G.jsx)("h4",{children:"Sign Up"})})]})]})]})}},{path:y.PASSWORD_RECOVERY,component:function(){var e=Object(r.useState)(""),t=Object(N.a)(e,2),n=t[0],a=t[1],c=Object(l.b)(),s=Object(i.g)();return Object(G.jsx)("div",{children:Object(G.jsxs)("form",{onSubmit:function(){/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(n)?(alert("\u043f\u0438\u0441\u044c\u043c\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043d\u0430 \u043f\u043e\u0447\u0442\u0443"),c(function(e){return function(){var t=Object(j.a)(d.a.mark((function t(n){var a,r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"http://localhost:3000/cards-react/#".concat(y.NEW_PASSWORD,"/$token$"),a="https://aportraitofjoyce.github.io/cards-react/#".concat(y.NEW_PASSWORD,"/$token$"),t.prev=2,r={email:e,from:"test-front-admin,<sberBank_security@gmail.com>",message:"<div style='background-color: lime; padding: 15px'>password recovery link: <a href='".concat(a,"'>link</a></div>")},n(_("loading")),t.next=7,v(r);case 7:n(I(e)),n(_("succeeded")),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(2),c=t.t0.response?t.t0.response.data.error:t.t0.message+", more details in the console",n(_("failed")),n(S(c));case 16:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()}(n)),s.push(y.CHECK_EMAIL)):alert("email is not valid")},children:[Object(G.jsx)("h1",{children:"IT-incubator"}),Object(G.jsx)("h2",{children:"Forgot your password?"}),Object(G.jsx)(H,{type:"email",placeholder:"enter your email",value:n,onChange:function(e){return a(e.currentTarget.value)}}),Object(G.jsx)("span",{children:"Enter your address and we will send you further instructions"}),Object(G.jsx)("div",{children:Object(G.jsx)(V,{children:"Send instructions"})})]})})}},{path:y.NEW_PASSWORD,component:function(){var e=Object(l.b)(),t=Object(i.h)().token,n=(Object(i.g)(),Object(r.useState)("")),a=Object(N.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)(""),u=Object(N.a)(o,2),b=u[0],h=u[1];return Object(G.jsx)("div",{className:Q.a.wrapper,children:Object(G.jsx)("div",{className:Q.a.container,children:Object(G.jsxs)("form",{className:Q.a.form,onSubmit:function(n){var a,r;n.preventDefault(),c===b?(alert("\u043f\u0430\u0440\u043e\u043b\u0438 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"),e((a=c,r=t,function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x({password:a,resetPasswordToken:r});case 3:200===e.sent.status&&alert("\u043f\u0430\u0440\u043e\u043b\u044c \u0438\u0437\u043c\u0435\u043d\u0451\u043d"),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),n=e.t0.response?e.t0.response.data.error:e.t0.message+", more details in the console",t(_("failed")),t(S(n));case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))):alert("\u043f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"),s(""),h("")},children:[Object(G.jsx)("h1",{children:"IT-incubator"}),Object(G.jsx)("h2",{children:"Create new password"}),Object(G.jsx)("label",{htmlFor:"inputNewPassword",children:"NewPassword"}),Object(G.jsx)(H,{id:"inputNewPassword",type:"text",onChange:function(e){return s(e.currentTarget.value)},value:c,placeholder:"New password"}),Object(G.jsx)("label",{htmlFor:"RepeatNewPassword",children:"RepeatNewPassword"}),Object(G.jsx)(H,{id:"RepeatNewPassword",type:"text",onChange:function(e){return h(e.currentTarget.value)},value:b,placeholder:"Repeat new password"}),Object(G.jsx)("h3",{children:"Create new password and will send you further instructions to email"}),Object(G.jsx)(V,{type:"submit",children:"Create new password"})]})})})}},{path:y.CHECK_EMAIL,component:function(){var e=A((function(e){return e.auth.recoveryEmail})),t=Object(i.g)();return setTimeout((function(){t.push(y.LOGIN)}),3e3),Object(G.jsx)("div",{className:te.a.checkEmail,children:Object(G.jsxs)("div",{className:te.a.container,children:[Object(G.jsx)("h1",{children:"IT-incubator"}),Object(G.jsx)("div",{className:te.a.icon,children:Object(G.jsx)("img",{src:"https://su-19.ru/wp-content/uploads/2020/12/mail_ico.png",alt:"iconMail"})}),Object(G.jsxs)("h3",{children:["We've sent an Email with instructions to ",e]})]})})}},{path:y.ERROR,component:function(){return Object(G.jsx)("div",{children:Object(G.jsx)("h1",{children:"Error 404"})})}}],ae=n(31),re=n.n(ae),ce=function(){return Object(G.jsx)("div",{children:Object(G.jsx)("div",{className:re.a.progressContainer,children:Object(G.jsx)("div",{className:re.a.progressBar})})})},se=function(){var e=A((function(e){return e.app})),t=e.status,n=e.isInitialized,a=Object(l.b)();return Object(r.useEffect)((function(){a(T())}),[]),n?Object(G.jsxs)(G.Fragment,{children:["loading"===t&&Object(G.jsx)(ce,{}),Object(G.jsxs)(i.d,{children:[ne.map((function(e){return Object(G.jsx)(i.b,{path:e.path,component:e.component,exact:e.exact},e.path)})),Object(G.jsx)(i.a,{from:y.EMPTY,to:y.ERROR})]})]}):Object(G.jsx)(ce,{})},oe=n(14),ie=n.n(oe),le=function(){var e=Object(l.b)();return Object(G.jsx)("div",{className:ie.a.wrapper,children:Object(G.jsxs)("nav",{className:ie.a.container,children:[Object(G.jsx)(K.b,{activeClassName:ie.a.active,to:y.HOME,exact:!0,children:"Home"}),Object(G.jsx)(K.b,{activeClassName:ie.a.active,to:y.PROFILE,style:{marginRight:64},children:"Profile"}),Object(G.jsx)(K.b,{activeClassName:ie.a.active,to:y.REGISTRATION,children:"Registration"}),Object(G.jsx)(K.b,{activeClassName:ie.a.active,to:y.LOGIN,children:"Login"}),Object(G.jsx)(K.b,{activeClassName:ie.a.active,to:y.PASSWORD_RECOVERY,children:"Password Recovery"}),Object(G.jsx)(K.b,{activeClassName:ie.a.active,to:y.CHECK_EMAIL,children:"Check email"}),Object(G.jsx)(K.b,{activeClassName:ie.a.active,to:y.NEW_PASSWORD,children:"New Password"}),Object(G.jsx)("span",{onClick:function(){e(function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(_("loading")),e.next=4,m();case 4:t(C(null)),t(P(!1)),t(_("succeeded")),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),n=e.t0.response?e.t0.response.data.error:e.t0.message+", more details in the console",t(_("failed")),t(S(n));case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())},children:"Logout"})]})})},ue=n(26),de=n(43),je={},be=Object(ue.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.SET_APP_INITIALIZED:return Object(b.a)(Object(b.a)({},e),{},{isInitialized:t.payload.status});case a.SET_APP_STATUS:return Object(b.a)(Object(b.a)({},e),{},{status:t.payload.status});case a.SET_APP_ERROR:return Object(b.a)(Object(b.a)({},e),{},{error:t.payload.error});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.SET_REGISTRATION_SUCCESS:return Object(b.a)(Object(b.a)({},e),{},{registrationSuccess:t.payload.status});case g.SET_USERS_INFO:return Object(b.a)(Object(b.a)({},e),{},{userInfo:t.payload});case g.SET_IS_LOGGED_IN:return Object(b.a)(Object(b.a)({},e),{},{isLoggedIn:t.payload.status});case g.SET_EMAIL_RECOVERY:return Object(b.a)(Object(b.a)({},e),{},{recoveryEmail:t.payload.email});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;return t.type,e},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(b.a)(Object(b.a)({},e),{},{avatar:t.payload.avatar,name:t.payload.name,publicCardPacksCount:t.payload.publicCardPacksCount});default:return e}}}),he=Object(ue.c)(be,Object(ue.a)(de.a));window.store=he;var pe=function(){return Object(G.jsx)(K.a,{children:Object(G.jsxs)(l.a,{store:he,children:[Object(G.jsx)(le,{}),Object(G.jsx)(se,{})]})})};o.a.render(Object(G.jsx)(c.a.StrictMode,{children:Object(G.jsx)(pe,{})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.2412e012.chunk.js.map